# 資料來源說明

## 資料獲取機制

系統使用多層備援機制來獲取股票資料：

### 1. 主要資料來源：yfinance

系統會優先嘗試從 **Yahoo Finance** 獲取真實的台股資料：
- 台股代碼格式：`股票代號.TW`（例如：2330.TW）
- 櫃買中心代碼：`股票代號.TWO`（例如：2330.TWO）

### 2. 備援方案：模擬資料

當無法從線上獲取資料時（可能原因如下），系統會自動切換到**模擬資料模式**：

**可能無法獲取真實資料的原因：**
- 網路連線問題
- Yahoo Finance API 限制或暫時無法存取
- 防火牆或代理伺服器限制
- 地區限制
- API 速率限制

## 模擬資料說明

### 特點

1. **基於真實價格範圍**
   - 每支股票都有預設的基準價格
   - 例如：台積電 (2330) 約 600 元、鴻海 (2317) 約 100 元

2. **合理的價格波動**
   - 使用統計模型生成符合股票行為的價格
   - 包含開盤價、最高價、最低價、收盤價、成交量

3. **一致性**
   - 同一股票代碼每次生成的資料序列相同
   - 方便測試和演示功能

4. **完整性**
   - 所有分析功能都能正常運作
   - 技術指標、風險評估、策略分析都能執行

### 支援的股票

系統內建以下熱門台股的基準價格：

| 代碼 | 股票名稱 | 產業 | 模擬基準價 |
|------|---------|------|-----------|
| 2330 | 台積電 | 半導體業 | 600 元 |
| 2317 | 鴻海 | 電子製造 | 100 元 |
| 2454 | 聯發科 | 半導體業 | 800 元 |
| 2412 | 中華電 | 通信網路業 | 120 元 |
| 2882 | 國泰金 | 金融保險業 | 50 元 |
| 2881 | 富邦金 | 金融保險業 | 70 元 |
| 2886 | 兆豐金 | 金融保險業 | 35 元 |
| 2891 | 中信金 | 金融保險業 | 25 元 |
| 2303 | 聯電 | 半導體業 | 45 元 |
| 2308 | 台達電 | 電子零組件 | 300 元 |

**其他股票代碼**會使用預設的基準價格 100 元。

## 如何判斷使用的是哪種資料？

### 使用真實資料
- 終端機無特殊訊息
- 資料會隨時間更新

### 使用模擬資料
- 終端機會顯示：
  ```
  提示: 使用模擬資料，因為無法從線上獲取 XXXX 的資料
  ```
- 資料固定不變（除非重新啟動系統）

## 功能影響

### 不受影響的功能

✅ 以下功能在模擬資料模式下**完全正常運作**：

1. **股票分析**
   - K線圖顯示
   - 價格統計
   - 歷史走勢

2. **風險評估**
   - 波動率計算
   - VaR 分析
   - Beta 係數
   - Sharpe Ratio
   - 最大回撤

3. **投資策略**
   - 所有技術指標（MA、RSI、MACD、KDJ等）
   - 綜合分析
   - 策略回測

4. **權證分析**
   - Black-Scholes 定價
   - Greeks 計算
   - 權證評估

### 注意事項

⚠️ 使用模擬資料時需要注意：

1. **資料非即時**
   - 模擬資料不反映真實市場狀況
   - 僅供學習、測試、演示使用

2. **不可用於實際交易決策**
   - 模擬資料生成的分析結果僅供參考
   - 實際交易請使用真實資料

3. **基本面資訊有限**
   - 市值、本益比等資訊會顯示 "N/A"
   - 僅提供股票名稱和產業資訊

## 如何使用真實資料

### 方法 1：檢查網路連線

確保可以存取 Yahoo Finance：
```bash
ping finance.yahoo.com
```

### 方法 2：使用 VPN

如果您的地區限制存取 Yahoo Finance，可以使用 VPN 連線到其他地區。

### 方法 3：等待一段時間後重試

API 可能有速率限制，稍後再試可能會成功。

### 方法 4：手動測試 yfinance

在 Python 中測試：
```python
import yfinance as yf
stock = yf.download("2330.TW", period="1mo")
print(stock)
```

如果上述命令能成功獲取資料，系統也應該能正常運作。

## 系統優勢

即使無法獲取真實資料，您仍然可以：

1. ✅ 學習如何使用系統的所有功能
2. ✅ 測試不同的投資策略
3. ✅ 了解技術分析指標的運作方式
4. ✅ 評估權證定價模型
5. ✅ 演示系統給他人看

## 技術細節

### 資料生成演算法

模擬資料使用以下方法生成：

1. **隨機漫步模型**
   - 基於布朗運動（Brownian Motion）
   - 價格變動服從常態分佈

2. **OHLC 資料**
   - 確保 High ≥ max(Open, Close)
   - 確保 Low ≤ min(Open, Close)
   - 符合真實市場邏輯

3. **成交量**
   - 基於股票規模生成合理範圍
   - 加入隨機波動

4. **可重現性**
   - 使用股票代碼作為隨機種子
   - 每次執行生成相同序列

## 常見問題

### Q: 為什麼我看到 "提示: 使用模擬資料" 訊息？

**A:** 系統無法從 Yahoo Finance 獲取真實資料，自動切換到模擬資料模式。這是正常的備援機制，不影響功能使用。

### Q: 模擬資料準確嗎？

**A:** 模擬資料基於統計模型生成，價格範圍和波動性都是合理的，但**不是真實市場資料**。僅供學習和測試使用。

### Q: 如何獲取真實資料？

**A:** 確保網路連線正常，並且可以存取 Yahoo Finance。如果所在地區有限制，可能需要使用 VPN。

### Q: 所有功能都能用模擬資料測試嗎？

**A:** 是的！所有分析功能、技術指標、風險評估、策略回測都能正常運作。

---

**重要提醒：** 本系統無論使用真實資料或模擬資料，所有分析結果僅供參考，不構成投資建議。投資有風險，決策需謹慎。
